<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Novo Usuário</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <h1><img class="page-icon page-icon--large" src="/icons/user.svg" alt="Novo Usuário"> Novo Usuário</h1>
    
    <form id="formUsuarioCriar" action="/usuarios/salvar" method="POST">
        <label>Nome Completo</label>
        <input id="nomeUsuario" type="text" name="nome" required placeholder="Apenas letras">
        <span id="warningNomeUsuario" class="warning" role="alert">O nome não pode conter números.</span>

        <label>Matrícula</label>
        <input id="matriculaUsuario" type="text" name="matricula" required placeholder="Apenas números">
        <span id="warningMatriculaUsuario" class="warning" role="alert">A matrícula deve conter apenas números.</span>

        <label>Email Institucional</label>
        <input type="email" name="email" required placeholder="aluno@unifor.br">

        <button type="submit">Salvar Cadastro</button>
    </form>

    <script>
        (function(){
            const nome = document.getElementById('nomeUsuario');
            const matricula = document.getElementById('matriculaUsuario');
            const warnNome = document.getElementById('warningNomeUsuario');
            const warnMat = document.getElementById('warningMatriculaUsuario');
            const form = document.getElementById('formUsuarioCriar');

            function validarNome() {
                const hasDigit = /\d/.test(nome.value);
                warnNome.classList.toggle('show', hasDigit);
                return !hasDigit;
            }

            function validarMatricula() {
                const hasNonDigit = /\D/.test(matricula.value);
                warnMat.classList.toggle('show', hasNonDigit);
                return !hasNonDigit && matricula.value.trim() !== '';
            }

            nome.addEventListener('input', validarNome);
            matricula.addEventListener('input', validarMatricula);

            form.addEventListener('submit', function(e){
                const okNome = validarNome();
                const okMat = validarMatricula();
                if (!okNome || !okMat) {
                    e.preventDefault();
                    (okNome ? matricula : nome).focus();
                }
            });
        })();
    </script>

    <a href="/usuarios">Cancelar</a>
</body>
</html>